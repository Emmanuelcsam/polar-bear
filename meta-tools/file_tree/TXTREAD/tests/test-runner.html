<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Reader Pro - Test Suite</title>
    <style>
        body {
            font-family: 'Monaco', 'Consolas', monospace;
            background: #1a1a2e;
            color: #e0e0ff;
            padding: 2rem;
            line-height: 1.6;
        }
        
        h1 {
            color: #6366f1;
            margin-bottom: 2rem;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .test-result {
            padding: 0.5rem;
            margin: 0.25rem 0;
            border-radius: 5px;
        }
        
        .test-pass {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        
        .test-fail {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        
        .test-stats {
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 10px;
        }
        
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-right: 1rem;
        }
        
        button:hover {
            background: #7c7ff3;
        }
        
        #testOutput {
            margin-top: 2rem;
        }
        
        .loading {
            color: #a78bfa;
        }
    </style>
</head>
<body>
    <h1>üß™ Zen Reader Pro Test Suite</h1>
    
    <div class="controls">
        <button onclick="runAllTests()">Run All Tests</button>
        <button onclick="runModuleTests()">Run Module Tests</button>
        <button onclick="runIntegrationTests()">Run Integration Tests</button>
        <button onclick="clearOutput()">Clear Output</button>
    </div>
    
    <div id="testOutput"></div>
    
    <script type="module">
        import { TestSuite } from './tests/TestSuite.js';
        
        window.testSuite = new TestSuite();
        
        window.runAllTests = async () => {
            showLoading();
            const results = await testSuite.runAll();
            displayResults(results);
        };
        
        window.runModuleTests = async () => {
            showLoading();
            const results = await testSuite.runModuleTests();
            displayResults(results);
        };
        
        window.runIntegrationTests = async () => {
            showLoading();
            const results = await testSuite.runIntegrationTests();
            displayResults(results);
        };
        
        window.clearOutput = () => {
            document.getElementById('testOutput').innerHTML = '';
        };
        
        function showLoading() {
            document.getElementById('testOutput').innerHTML = '<p class="loading">Running tests...</p>';
        }
        
        function displayResults(results) {
            const output = document.getElementById('testOutput');
            let html = '';
            
            Object.entries(results.tests).forEach(([category, tests]) => {
                html += `<div class="test-section">`;
                html += `<h3>${category}</h3>`;
                
                tests.forEach(test => {
                    const className = test.passed ? 'test-pass' : 'test-fail';
                    const icon = test.passed ? '‚úÖ' : '‚ùå';
                    html += `<div class="test-result ${className}">`;
                    html += `${icon} ${test.name}`;
                    if (!test.passed && test.error) {
                        html += `<br><small>${test.error}</small>`;
                    }
                    html += `</div>`;
                });
                
                html += `</div>`;
            });
            
            html += `<div class="test-stats">`;
            html += `<h3>Test Summary</h3>`;
            html += `<p>Total Tests: ${results.total}</p>`;
            html += `<p>Passed: ${results.passed} (${Math.round(results.passed / results.total * 100)}%)</p>`;
            html += `<p>Failed: ${results.failed}</p>`;
            html += `<p>Duration: ${results.duration}ms</p>`;
            html += `</div>`;
            
            output.innerHTML = html;
        }
        
        // Auto-run tests on load
        window.addEventListener('load', () => {
            console.log('Test suite loaded. Click buttons to run tests.');
        });
    </script>
</body>
</html>